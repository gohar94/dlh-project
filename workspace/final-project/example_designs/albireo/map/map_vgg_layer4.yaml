mapping:
  # =======================================
  # DRAM
  # =======================================
  - target: DRAM
    type: temporal
    factors: R=1 S=1 P=1 Q=12 N=1 M=1 C=43
    permutation: Q
  - target: DRAM
    type: bypass
    keep: [Inputs, Outputs]
    bypass: [Weights]  # weights are stored locally in the weight cache, not loaded from DRAM
  # =======================================
  # Global Buffer Constraints
  # =======================================
  - target: shared_glb
    type: temporal
    factors: R=1 S=1 P=0 Q=1 N=0 M=15 C=1
    permutation: SRCQPMN
  - target: shared_glb
    type: bypass
    keep: [Inputs, Outputs, Weights]
    bypass: [] # weights are stored locally in the weight cache, not loaded from DRAM
  # =======================================
  # Dummy Buffer Constraints
  # =======================================
  - target: dummy_buffer
    type: temporal
    factors: R=1 S=1 P=1 Q=1 N=1 C=1 M=1
  # - target: dummy_buffer
  #   type: spatial
  #   factors: M=3
  #   split: 1
  #   permutation: M
  - target: dummy_buffer
    type: spatial
    factors: R=1 S=1 P=1 Q=1 N=1 C=1 M=9,2
    permutation: M
    split: 1
  - target: dummy_buffer
    type: bypass
    keep: []
    bypass: [Inputs, Outputs, Weights]  # no data should be stored in dummy, it is just a transition buffer
  # =======================================
  # PLCG Dummy Buffer Constraints
  # =======================================
  # - target: plcg_dummy_buffer
  #   type: temporal
  # - target: plcg_dummy_buffer
  #   type: spatial
  #   factors: R=1 S=1 P=1 Q=1 N=1 C=1 M=3,0
  #   permutation: M
  #   split: 1
  # - target: plcg_dummy_buffer
  #   type: bypass
  #   keep: []
  #   bypass: [Inputs, Outputs, Weights]  # no data should be stored in dummy, it is just a transition buffer
  # =======================================
  # WS Buffer Constraints
  # =======================================
  - target: weight_cache
    type: temporal
  - target: weight_cache
    type: spatial
    factors: R=1 S=1 P=1 Q=1 N=1 C=3,2 M=1
    permutation: C
    split: 1
  - target: weight_cache
    type: bypass
    keep: [Weights]
    bypass: [Inputs, Outputs]
  # =======================================
  # PLCU Dummy Buffer Constraints
  # =======================================
  - target: plcu_dummy_buffer
    type: temporal
  - target: plcu_dummy_buffer
    type: spatial
    factors: R=1 S=1 P=1 Q=5,1 N=1 C=1 M=1
    permutation: Q
    split: 1
  - target: plcu_dummy_buffer
    type: bypass
    keep: []
    bypass: [Inputs, Outputs, Weights]  # no data should be stored in dummy, it is just a transition buffer
  # =======================================
  # pSum Buffer Constraints
  # =======================================
  - target: psumBuffer
    type: temporal
    factors: R=0 S=0 P=1 Q=1 N=1 C=1 M=1
  - target: psumBuffer
    type: bypass
    keep: [Outputs]
    bypass: [Inputs,Weights]  # no data should be stored in dummy, it is just a transition buffer